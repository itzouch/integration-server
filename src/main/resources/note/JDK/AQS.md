# 抽象队列同步阻塞器
1. 核心工作思想：
如果被请求的共享资源空闲，那么就将当前请求资源的线程设置为有效的工作线程，将共享资源设置为锁定状态；
如果共享资源被占用，就需要一定的阻塞等待唤醒机制来保证锁分配。这个机制主要用的是CLH队列的变体实现的，将暂时获取不到锁的线程加入到队列中。

主要原理：通过一个volatile修饰的state表示同步状态，通过双端队列来完成资源获取的排队工作，通过CAS来修改State值。

2. 讲一下AQS
AQS-抽象队列同步阻塞器，定义了一套同步获取资源的逻辑框架。
由上至下可以分为api层、锁的获取、排队的操作、数据操作的提供。
自定义实现同步器只需要实现api层的一些方法即可。主要有公平和非公平锁的获取和释放方式，之后的排队规则由AQS处理。